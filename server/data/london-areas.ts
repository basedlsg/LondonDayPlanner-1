import { z } from "zod";

export const areaSchema = z.object({
  name: z.string(),
  type: z.enum(["borough", "neighborhood", "area"]),
  borough: z.string().optional(),
  characteristics: z.array(z.string()),
  neighbors: z.array(z.string()),
  popularFor: z.array(z.string()),
  crowdLevels: z.object({
    morning: z.number(),
    afternoon: z.number(),
    evening: z.number(),
    weekend: z.number(),
  }),
});

export type LondonArea = z.infer<typeof areaSchema>;

export const londonAreas: LondonArea[] = [
  {
    name: "Fitzrovia",
    type: "neighborhood",
    borough: "Camden/Westminster",
    characteristics: ["artsy", "mixed-use", "historic"],
    neighbors: ["Bloomsbury", "Marylebone", "Soho", "Euston", "Oxford Street"],
    popularFor: ["art galleries", "media companies", "restaurants", "pubs"],
    crowdLevels: {
      morning: 2,
      afternoon: 3,
      evening: 4,
      weekend: 3,
    },
  },
  {
    name: "Green Park",
    type: "area",
    borough: "Westminster",
    characteristics: ["royal park", "open space", "peaceful"],
    neighbors: ["Mayfair", "St. James's", "Piccadilly", "Buckingham Palace"],
    popularFor: ["picnics", "relaxation", "walking", "royal ceremonies"],
    crowdLevels: {
      morning: 2,
      afternoon: 3,
      evening: 1,
      weekend: 4,
    },
  },
  {
    name: "Mayfair",
    type: "neighborhood",
    borough: "Westminster",
    characteristics: ["luxury", "upscale", "historic", "exclusive"],
    neighbors: ["Green Park", "Soho", "Hyde Park", "Marylebone", "Piccadilly", "St. James's", "Oxford Street", "Baker Street"],
    popularFor: ["luxury shopping", "fine dining", "art galleries", "hotels"],
    crowdLevels: {
      morning: 2,
      afternoon: 4,
      evening: 3,
      weekend: 4,
    },
  },
  {
    name: "Soho",
    type: "neighborhood",
    borough: "Westminster",
    characteristics: ["vibrant", "nightlife", "entertainment", "diverse", "lively"],
    neighbors: ["Mayfair", "Fitzrovia", "Chinatown", "Covent Garden", "Oxford Street", "Piccadilly", "Leicester Square", "Piccadilly Circus"],
    popularFor: ["restaurants", "bars", "nightclubs", "theaters", "shopping"],
    crowdLevels: {
      morning: 3,
      afternoon: 4,
      evening: 5,
      weekend: 5,
    },
  },
  {
    name: "Bloomsbury",
    type: "neighborhood",
    borough: "Camden",
    characteristics: ["academic", "literary", "historic", "cultural"],
    neighbors: ["Fitzrovia", "King's Cross", "Holborn", "Russell Square"],
    popularFor: ["museums", "universities", "bookshops", "garden squares", "British Museum"],
    crowdLevels: {
      morning: 3,
      afternoon: 4,
      evening: 2,
      weekend: 4,
    },
  },
  {
    name: "Covent Garden",
    type: "neighborhood",
    borough: "Westminster/Camden",
    characteristics: ["touristy", "shopping", "entertainment", "vibrant"],
    neighbors: ["Soho", "Holborn", "Strand", "Leicester Square", "Chinatown"],
    popularFor: ["market", "street performers", "theaters", "restaurants", "shopping"],
    crowdLevels: {
      morning: 3,
      afternoon: 5,
      evening: 5,
      weekend: 5,
    },
  },
  {
    name: "Camden Town",
    type: "neighborhood",
    borough: "Camden",
    characteristics: ["alternative", "diverse", "quirky", "lively"],
    neighbors: ["Regent's Park", "Primrose Hill", "Kentish Town", "King's Cross"],
    popularFor: ["Camden Market", "live music", "street food", "alternative fashion"],
    crowdLevels: {
      morning: 2,
      afternoon: 4,
      evening: 4,
      weekend: 5,
    },
  },
  {
    name: "Notting Hill",
    type: "neighborhood",
    borough: "Kensington and Chelsea",
    characteristics: ["trendy", "upscale", "diverse", "picturesque"],
    neighbors: ["Holland Park", "Bayswater", "Kensington", "Westbourne Green"],
    popularFor: ["Portobello Road Market", "colorful houses", "Notting Hill Carnival", "cafes"],
    crowdLevels: {
      morning: 2,
      afternoon: 4,
      evening: 3,
      weekend: 5,
    },
  },
  {
    name: "Shoreditch",
    type: "neighborhood",
    borough: "Hackney/Tower Hamlets",
    characteristics: ["hipster", "trendy", "artistic", "vibrant"],
    neighbors: ["Hoxton", "Spitalfields", "Old Street", "Bethnal Green", "City of London"],
    popularFor: ["street art", "nightlife", "vintage shops", "tech startups", "food markets"],
    crowdLevels: {
      morning: 2,
      afternoon: 3,
      evening: 5,
      weekend: 5,
    },
  },
  {
    name: "South Kensington",
    type: "neighborhood",
    borough: "Kensington and Chelsea",
    characteristics: ["upscale", "cultural", "international", "elegant"],
    neighbors: ["Knightsbridge", "Chelsea", "Kensington", "Earl's Court"],
    popularFor: ["museums", "embassies", "luxury apartments", "cafes", "French expats"],
    crowdLevels: {
      morning: 2,
      afternoon: 4,
      evening: 3,
      weekend: 5,
    },
  },
  {
    name: "Brixton",
    type: "neighborhood",
    borough: "Lambeth",
    characteristics: ["diverse", "multicultural", "vibrant", "lively", "creative"],
    neighbors: ["Herne Hill", "Clapham", "Stockwell", "Camberwell"],
    popularFor: ["Brixton Market", "music venues", "Caribbean food", "street art", "nightlife"],
    crowdLevels: {
      morning: 3,
      afternoon: 4,
      evening: 4,
      weekend: 5,
    },
  },
  {
    name: "Kensington",
    type: "neighborhood",
    borough: "Kensington and Chelsea",
    characteristics: ["upscale", "elegant", "historic", "cultural"],
    neighbors: ["Holland Park", "Notting Hill", "South Kensington", "Hammersmith", "Hyde Park"],
    popularFor: ["Kensington Palace", "shopping", "high-end residences", "gardens"],
    crowdLevels: {
      morning: 2,
      afternoon: 4,
      evening: 3,
      weekend: 4,
    },
  },
  {
    name: "King's Cross",
    type: "neighborhood",
    borough: "Camden/Islington",
    characteristics: ["regenerated", "transport hub", "modern", "developing"],
    neighbors: ["Camden Town", "Bloomsbury", "Islington", "Euston"],
    popularFor: ["train stations", "new developments", "food scene", "cultural venues"],
    crowdLevels: {
      morning: 5,
      afternoon: 4,
      evening: 4,
      weekend: 4,
    },
  },
  {
    name: "Hampstead",
    type: "neighborhood",
    borough: "Camden",
    characteristics: ["affluent", "village-like", "historic", "intellectual"],
    neighbors: ["Hampstead Heath", "Belsize Park", "Swiss Cottage", "Highgate"],
    popularFor: ["Hampstead Heath", "historic pubs", "literary connections", "upscale living"],
    crowdLevels: {
      morning: 2,
      afternoon: 3,
      evening: 3,
      weekend: 4,
    },
  },
  {
    name: "Hampstead Heath",
    type: "area",
    borough: "Camden",
    characteristics: ["nature", "open space", "hills", "picturesque"],
    neighbors: ["Hampstead", "Highgate", "Gospel Oak", "East Heath"],
    popularFor: ["swimming ponds", "walking", "views of London", "Parliament Hill"],
    crowdLevels: {
      morning: 2,
      afternoon: 3,
      evening: 2,
      weekend: 5,
    },
  },
  {
    name: "Richmond",
    type: "neighborhood",
    borough: "Richmond upon Thames",
    characteristics: ["affluent", "riverside", "historic", "scenic"],
    neighbors: ["Richmond Park", "Kew", "Twickenham", "East Sheen"],
    popularFor: ["Richmond Park", "riverside walks", "shopping", "upscale living"],
    crowdLevels: {
      morning: 2,
      afternoon: 3,
      evening: 3,
      weekend: 4,
    },
  },
  {
    name: "Richmond Park",
    type: "area",
    borough: "Richmond upon Thames",
    characteristics: ["royal park", "nature", "wildlife", "vast"],
    neighbors: ["Richmond", "Kingston", "East Sheen", "Roehampton"],
    popularFor: ["deer", "cycling", "walking", "nature watching"],
    crowdLevels: {
      morning: 2,
      afternoon: 3,
      evening: 1,
      weekend: 4,
    },
  },
  {
    name: "Greenwich",
    type: "neighborhood",
    borough: "Greenwich",
    characteristics: ["historic", "maritime", "cultural", "scenic"],
    neighbors: ["Deptford", "Blackheath", "Isle of Dogs", "Charlton", "Canary Wharf"],
    popularFor: ["Royal Observatory", "Cutty Sark", "Greenwich Market", "meridian line"],
    crowdLevels: {
      morning: 2,
      afternoon: 4,
      evening: 3,
      weekend: 5,
    },
  },
  {
    name: "Canary Wharf",
    type: "area",
    borough: "Tower Hamlets",
    characteristics: ["financial district", "modern", "business", "upscale"],
    neighbors: ["Isle of Dogs", "Poplar", "Limehouse", "Greenwich"],
    popularFor: ["skyscrapers", "shopping malls", "business centers", "waterfront dining"],
    crowdLevels: {
      morning: 4,
      afternoon: 5,
      evening: 3,
      weekend: 2,
    },
  },
  {
    name: "Marylebone",
    type: "neighborhood",
    borough: "Westminster",
    characteristics: ["upscale", "elegant", "central", "sophisticated"],
    neighbors: ["Fitzrovia", "Mayfair", "Regent's Park", "Baker Street", "Oxford Street"],
    popularFor: ["Marylebone High Street", "dining", "boutique shopping", "medical facilities"],
    crowdLevels: {
      morning: 3,
      afternoon: 4,
      evening: 3,
      weekend: 4,
    },
  },
  {
    name: "Chinatown",
    type: "neighborhood",
    borough: "Westminster",
    characteristics: ["cultural", "vibrant", "bustling", "international"],
    neighbors: ["Soho", "Leicester Square", "Piccadilly Circus", "Covent Garden"],
    popularFor: ["Chinese restaurants", "Asian supermarkets", "cultural celebrations", "authentic food"],
    crowdLevels: {
      morning: 2,
      afternoon: 4,
      evening: 5,
      weekend: 5,
    },
  },
  {
    name: "Oxford Street",
    type: "area",
    borough: "Westminster",
    characteristics: ["shopping", "busy", "commercial", "touristy"],
    neighbors: ["Soho", "Marylebone", "Mayfair", "Fitzrovia", "Baker Street"],
    popularFor: ["department stores", "high street shopping", "flagship stores", "Christmas lights"],
    crowdLevels: {
      morning: 3,
      afternoon: 5,
      evening: 4,
      weekend: 5,
    },
  },
  {
    name: "Piccadilly",
    type: "area",
    borough: "Westminster",
    characteristics: ["bustling", "central", "touristy", "iconic"],
    neighbors: ["Green Park", "St. James's", "Soho", "Mayfair", "Piccadilly Circus"],
    popularFor: ["Piccadilly Circus", "shopping", "theaters", "restaurants"],
    crowdLevels: {
      morning: 3,
      afternoon: 5,
      evening: 5,
      weekend: 5,
    },
  },
  {
    name: "St. James's",
    type: "neighborhood",
    borough: "Westminster",
    characteristics: ["prestigious", "historic", "traditional", "upscale"],
    neighbors: ["Piccadilly", "Green Park", "Mayfair", "Westminster"],
    popularFor: ["gentlemen's clubs", "art galleries", "luxury shopping", "historic institutions"],
    crowdLevels: {
      morning: 2,
      afternoon: 3,
      evening: 2,
      weekend: 3,
    },
  },
  {
    name: "Hyde Park",
    type: "area",
    borough: "Westminster/Kensington and Chelsea",
    characteristics: ["royal park", "open space", "recreational", "scenic"],
    neighbors: ["Mayfair", "Kensington", "Knightsbridge", "Bayswater"],
    popularFor: ["Serpentine lake", "Speaker's Corner", "winter wonderland", "concerts", "horse riding"],
    crowdLevels: {
      morning: 3,
      afternoon: 4,
      evening: 2,
      weekend: 5,
    },
  },
  {
    name: "Knightsbridge",
    type: "neighborhood",
    borough: "Kensington and Chelsea/Westminster",
    characteristics: ["luxury", "upscale", "international", "exclusive"],
    neighbors: ["South Kensington", "Hyde Park", "Belgravia", "Chelsea"],
    popularFor: ["Harrods", "Harvey Nichols", "luxury boutiques", "international residents"],
    crowdLevels: {
      morning: 2,
      afternoon: 5,
      evening: 3,
      weekend: 5,
    },
  },
  {
    name: "Holborn",
    type: "neighborhood",
    borough: "Camden",
    characteristics: ["legal", "business", "historic", "central"],
    neighbors: ["Covent Garden", "Bloomsbury", "City of London", "Farringdon", "Strand"],
    popularFor: ["law firms", "business centers", "Royal Courts of Justice", "historic pubs"],
    crowdLevels: {
      morning: 4,
      afternoon: 4,
      evening: 3,
      weekend: 2,
    },
  },
  {
    name: "Chelsea",
    type: "neighborhood",
    borough: "Kensington and Chelsea",
    characteristics: ["upscale", "sophisticated", "fashionable", "artistic"],
    neighbors: ["Knightsbridge", "South Kensington", "Fulham", "Belgravia", "Earl's Court"],
    popularFor: ["King's Road shopping", "Chelsea Flower Show", "luxury homes", "football club"],
    crowdLevels: {
      morning: 2,
      afternoon: 4,
      evening: 4,
      weekend: 5,
    },
  },
  {
    name: "Euston",
    type: "neighborhood",
    borough: "Camden",
    characteristics: ["transport hub", "urban", "busy", "commercial"],
    neighbors: ["King's Cross", "Fitzrovia", "Regent's Park", "Somers Town"],
    popularFor: ["Euston Station", "businesses", "offices", "University College London"],
    crowdLevels: {
      morning: 5,
      afternoon: 4,
      evening: 3,
      weekend: 3,
    },
  },
  {
    name: "Leicester Square",
    type: "area",
    borough: "Westminster",
    characteristics: ["touristy", "entertainment", "bustling", "central"],
    neighbors: ["Chinatown", "Covent Garden", "Piccadilly Circus", "Soho"],
    popularFor: ["cinemas", "movie premieres", "theaters", "restaurants", "nightlife"],
    crowdLevels: {
      morning: 3,
      afternoon: 5,
      evening: 5,
      weekend: 5,
    },
  },
  {
    name: "Regent's Park",
    type: "area",
    borough: "Westminster/Camden",
    characteristics: ["royal park", "open space", "recreational", "scenic"],
    neighbors: ["Camden Town", "Marylebone", "Baker Street", "Primrose Hill", "Euston"],
    popularFor: ["London Zoo", "boating lake", "open air theatre", "sports facilities", "rose gardens"],
    crowdLevels: {
      morning: 2,
      afternoon: 4,
      evening: 2,
      weekend: 5,
    },
  },
  {
    name: "Highgate",
    type: "neighborhood",
    borough: "Haringey/Camden",
    characteristics: ["village-like", "historic", "upscale", "leafy"],
    neighbors: ["Hampstead", "Hampstead Heath", "Archway", "Muswell Hill"],
    popularFor: ["Highgate Cemetery", "historic pubs", "Kenwood House", "village atmosphere"],
    crowdLevels: {
      morning: 2,
      afternoon: 3,
      evening: 2,
      weekend: 4,
    },
  },
  {
    name: "Belgravia",
    type: "neighborhood",
    borough: "Westminster/Kensington and Chelsea",
    characteristics: ["luxury", "elegant", "prestigious", "exclusive"],
    neighbors: ["Knightsbridge", "Chelsea", "Victoria", "Pimlico"],
    popularFor: ["embassies", "white stucco houses", "upscale residences", "garden squares"],
    crowdLevels: {
      morning: 2,
      afternoon: 3,
      evening: 2,
      weekend: 3,
    },
  },
  {
    name: "Baker Street",
    type: "area",
    borough: "Westminster",
    characteristics: ["historic", "tourist", "commercial", "cultural"],
    neighbors: ["Marylebone", "Regent's Park", "Mayfair", "Oxford Street"],
    popularFor: ["Sherlock Holmes Museum", "Madame Tussauds", "offices", "shopping"],
    crowdLevels: {
      morning: 3,
      afternoon: 4,
      evening: 3,
      weekend: 5,
    },
  },
  {
    name: "Piccadilly Circus",
    type: "area",
    borough: "Westminster",
    characteristics: ["iconic", "bustling", "touristy", "landmark"],
    neighbors: ["Piccadilly", "Leicester Square", "Soho", "Chinatown"],
    popularFor: ["digital billboards", "Eros statue", "meeting point", "shopping"],
    crowdLevels: {
      morning: 4,
      afternoon: 5,
      evening: 5,
      weekend: 5,
    },
  },
  {
    name: "Bayswater",
    type: "neighborhood",
    borough: "Westminster",
    characteristics: ["cosmopolitan", "residential", "diverse", "central"],
    neighbors: ["Notting Hill", "Hyde Park", "Paddington", "Queensway"],
    popularFor: ["hotels", "international restaurants", "garden squares", "shopping"],
    crowdLevels: {
      morning: 3,
      afternoon: 4,
      evening: 3,
      weekend: 4,
    },
  },
  {
    name: "Primrose Hill",
    type: "neighborhood",
    borough: "Camden",
    characteristics: ["affluent", "village-like", "scenic", "trendy"],
    neighbors: ["Camden Town", "Regent's Park", "Chalk Farm", "Swiss Cottage"],
    popularFor: ["viewpoint", "celebrity residents", "boutique shops", "cafes"],
    crowdLevels: {
      morning: 2,
      afternoon: 4,
      evening: 3,
      weekend: 5,
    },
  },
  {
    name: "Strand",
    type: "area",
    borough: "Westminster/City of London",
    characteristics: ["historic", "commercial", "cultural", "busy"],
    neighbors: ["Covent Garden", "Holborn", "Embankment", "Temple"],
    popularFor: ["theatres", "Somerset House", "King's College London", "historic buildings"],
    crowdLevels: {
      morning: 4,
      afternoon: 5,
      evening: 4,
      weekend: 3,
    },
  },
  {
    name: "Earl's Court",
    type: "neighborhood",
    borough: "Kensington and Chelsea",
    characteristics: ["diverse", "residential", "international", "central"],
    neighbors: ["South Kensington", "West Kensington", "Fulham", "Chelsea"],
    popularFor: ["exhibition center", "budget accommodation", "international restaurants", "transport hub"],
    crowdLevels: {
      morning: 3,
      afternoon: 3,
      evening: 4,
      weekend: 4,
    },
  },
  {
    name: "Holland Park",
    type: "neighborhood",
    borough: "Kensington and Chelsea",
    characteristics: ["upscale", "leafy", "peaceful", "elegant"],
    neighbors: ["Notting Hill", "Kensington", "Shepherd's Bush"],
    popularFor: ["Holland Park grounds", "luxury homes", "Kyoto Garden", "opera"],
    crowdLevels: {
      morning: 2,
      afternoon: 3,
      evening: 2,
      weekend: 4,
    },
  },
  {
    name: "City of London",
    type: "area",
    borough: "City of London",
    characteristics: ["financial", "historic", "business", "architectural"],
    neighbors: ["Shoreditch", "Holborn", "Southwark", "Tower Hill"],
    popularFor: ["St Paul's Cathedral", "financial institutions", "historic buildings", "museums"],
    crowdLevels: {
      morning: 5,
      afternoon: 5,
      evening: 2,
      weekend: 2,
    },
  },
  {
    name: "Islington",
    type: "neighborhood",
    borough: "Islington",
    characteristics: ["trendy", "diverse", "lively", "cultural"],
    neighbors: ["King's Cross", "Angel", "Highbury", "Clerkenwell"],
    popularFor: ["Upper Street shopping", "restaurants", "theaters", "antique shops"],
    crowdLevels: {
      morning: 3,
      afternoon: 4,
      evening: 4,
      weekend: 5,
    },
  },
  {
    name: "Westminster",
    type: "area",
    borough: "Westminster",
    characteristics: ["political", "historic", "tourist", "iconic"],
    neighbors: ["St. James's", "Victoria", "Pimlico", "South Bank", "Buckingham Palace"],
    popularFor: ["Houses of Parliament", "Westminster Abbey", "government buildings", "Big Ben"],
    crowdLevels: {
      morning: 4,
      afternoon: 5,
      evening: 3,
      weekend: 5,
    },
  },
  {
    name: "Kentish Town",
    type: "neighborhood",
    borough: "Camden",
    characteristics: ["residential", "diverse", "urban", "cultural"],
    neighbors: ["Camden Town", "Tufnell Park", "Gospel Oak", "Chalk Farm"],
    popularFor: ["live music venues", "gastropubs", "residential streets", "arts scene"],
    crowdLevels: {
      morning: 3,
      afternoon: 3,
      evening: 4,
      weekend: 4,
    },
  },
  {
    name: "Hammersmith",
    type: "neighborhood",
    borough: "Hammersmith and Fulham",
    characteristics: ["riverside", "commercial", "transport hub", "mixed"],
    neighbors: ["Kensington", "Fulham", "Shepherd's Bush", "Chiswick", "West Kensington"],
    popularFor: ["Apollo venue", "riverside pubs", "offices", "transport links"],
    crowdLevels: {
      morning: 4,
      afternoon: 4,
      evening: 3,
      weekend: 3,
    },
  },
  {
    name: "Buckingham Palace",
    type: "area",
    borough: "Westminster",
    characteristics: ["royal", "iconic", "historic", "ceremonial"],
    neighbors: ["Green Park", "St. James's Park", "Westminster", "Victoria"],
    popularFor: ["royal residence", "changing of the guard", "state rooms", "royal ceremonies"],
    crowdLevels: {
      morning: 4,
      afternoon: 5,
      evening: 2,
      weekend: 5,
    },
  }
];

// Helper function to find areas by characteristics
export function findAreasByCharacteristics(
  characteristics: string[],
  excludeAreas: string[] = [],
): LondonArea[] {
  return londonAreas.filter(
    (area) =>
      !excludeAreas.includes(area.name) &&
      characteristics.some(
        (c) => area.characteristics.includes(c) || area.popularFor.includes(c),
      ),
  );
}

// Helper to get crowd level for a specific time
export function getAreaCrowdLevel(
  area: LondonArea,
  timeOfDay: string,
  isWeekend: boolean,
): number {
  if (isWeekend) return area.crowdLevels.weekend;

  const hour = parseInt(timeOfDay.split(":")[0]);
  if (hour < 12) return area.crowdLevels.morning;
  if (hour < 17) return area.crowdLevels.afternoon;
  return area.crowdLevels.evening;
}

// Helper to find quiet areas
export function findQuietAreas(
  timeOfDay: string,
  isWeekend: boolean,
  nearArea?: string,
): LondonArea[] {
  const areas = nearArea
    ? londonAreas.filter((a) => a.neighbors.includes(nearArea))
    : londonAreas;

  return areas.filter((area) => {
    const crowdLevel = getAreaCrowdLevel(area, timeOfDay, isWeekend);
    return crowdLevel <= 2; // Areas with low crowd levels
  });
}
